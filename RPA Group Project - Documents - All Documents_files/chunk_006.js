(window.webpackJsonp_4df9bb86_ab0a_4aab_ab5f_48bf167048fb_1_13_0=window.webpackJsonp_4df9bb86_ab0a_4aab_ab5f_48bf167048fb_1_13_0||[]).push([[1],{oPyX:function(e,t,r){"use strict";r.r(t);var i=r("ut3N"),a=r("UWqr"),s=function(){function e(t,r,i,s,o,n,h){a.Validate.isNonemptyString(t,"id"),a.Validate.isNotNullOrUndefined(s,"executor"),a.Validate.isNotNullOrUndefined(o,"validator"),this._id=t,this._executor=s,this._dataValidator=o,this._refreshThreshold=n||e.refreshThresholdMs,this._maxStoreSize=h||e.maxStoreSize;var _=e._initStore(t,this._maxStoreSize,r,i);this._buildMinHeap(_)}return e._leftChild=function(e){return 2*e+1},e._rightChild=function(e){return 2*e+2},e._parent=function(e){return Math.floor((e-1)/2)},e._swap=function(e,t,r){var i=e[r];e[r]=e[t],e[t]=i},e._generateItemCacheKey=function(){return"spfx-ndsi-"+Date.now()+"-"+Math.floor(1e3*Math.random())},e._fetchSessionCacheEntry=function(t){var r=void 0;try{var i=t.itemReference;if(i&&i.length>0){var a=sessionStorage.getItem(i);if(a&&a.length>0){var s=JSON.parse(a);s&&e._normalizeUrl(s.url)===e._normalizeUrl(t.url)&&(r=s)}}}catch(e){}return r},e._fetchItemData=function(t,r){var i=e._fetchSessionCacheEntry(t);if(i&&i.payload)return{navData:i.payload.navData,data:r&&i.payload.data?i.payload.data:void 0}},e._upsertItemData=function(t,r,i){var a=e._fetchSessionCacheEntry(t);if(a&&a.payload)i?a.payload.navData=r:a.payload.data=r,e._updateStore(t.itemReference,a);else{var s={navData:i?r:void 0,data:i?void 0:r},o={url:t.url,payload:s},n=e._generateItemCacheKey();e._updateStore(n,o),t.itemReference=n}},e._removeItemEntries=function(e){Array.isArray(e)&&e.length>0&&e.forEach(function(e){e&&e.itemReference&&e.itemReference.length>0&&sessionStorage.removeItem(e.itemReference)})},e._initStore=function(t,r,i,a){var s=[];try{var o=sessionStorage.getItem(i);a!==o&&sessionStorage.setItem(i,a);var n=sessionStorage.getItem(t);if(n&&n.length>0){var h=JSON.parse(n);if(Array.isArray(h)&&h.length>0){s=h;var _=a!==o?h.length:r;if(s.length>r||a!==o){var c=s.splice(_);e._removeItemEntries(c)}if(a!==o)return sessionStorage.removeItem(t),[]}}}catch(e){}return s},e._updateStore=function(e,t){try{sessionStorage.setItem(e,JSON.stringify(t))}catch(e){}},e._generatePreloadHeaders=function(e){var t=new Headers;return e&&e.isPrefetchRequest&&t.append("X-RequestPrefetchLink","1"),!a._SPKillSwitch.isActivated("153edef1-9c5b-4ad1-aa5f-a9c53071e0fa")&&window.__spfxMark&&t.append("X-Service-Worker-In-Place-Nav","true"),t},e._generatePrefetchHeaders=function(e){var t=new Headers;return t.append("X-RequestPrefetchData","1"),e&&e.isPrefetchRequest&&t.append("X-RequestPrefetchLink","1"),t},e._normalizeUrl=function(e){return e&&e.toLowerCase()},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._store.items},enumerable:!1,configurable:!0}),e.prototype.getData=function(t,r){a.Validate.isNonemptyString(t,"url");var i=void 0,s=-1;if(r&&r.enableCache){var o=this._findItem(t);if(i=o.item,s=o.index,i&&i.fetchedTime){var n=Date.now()-this._refreshThreshold;if(!(i.fetchedTime<=n)){r.isPrefetchRequest||(i.accessedTime=Date.now(),this._heapify(s),e._updateStore(this._id,this._store.items));var h=e._fetchItemData(i,r.enableDataPrefetch);if(h&&h.navData){var _=Promise.resolve(h.navData),c=r.enableDataPrefetch?Promise.resolve(h.data):void 0;return Promise.resolve({preloadedData:_,prefetchedData:c})}}}}return this._fetchData(t,r,i,s)},e.prototype.remove=function(t){var r=!1;if(t instanceof RegExp)r=this._removeMatching(t);else{var i=this._findItem(t);if(i.index>-1){var a=this._store.items.splice(i.index,1);e._removeItemEntries(a),r=!0}}r&&(this._buildMinHeap(this._store.items),e._updateStore(this._id,this._store.items))},e.prototype._removeMatching=function(t){t=new RegExp(e._normalizeUrl(t.source),"i");var r=!1,i=-1,a=this._store.size,s=[];for(i=0;i<a;i++){var o=this._store.items[i];if(o&&t.test(e._normalizeUrl(o.url))){var n=this._store.items.splice(i,1);n&&s.push.apply(s,n),i--,a--,r=!0}}return e._removeItemEntries(s),r},e.prototype._addOrUpdateCacheEntry=function(t,r,i,s){if(s&&s.item)i?(s.item.fetchedTime=Date.now(),s.item.accessedTime=s.item.fetchedTime,e._upsertItemData(s.item,r,!0),this._heapify(s.index)):e._upsertItemData(s.item,r,!1);else{var o=this._findItem(t);if(o.item)e._upsertItemData(o.item,r,i);else{if(!a._SPKillSwitch.isActivated("5433a3bc-803a-458b-b88b-2ae6540f7d43"))try{new RegExp(t)}catch(e){return}var n=Date.now(),h={accessedTime:n,fetchedTime:n,url:t};e._upsertItemData(h,r,i),this._insert(h)}}e._updateStore(this._id,this._store.items)},e.prototype._fetchData=function(t,r,a,s){var o=this,n=this._executor(t,e._generatePreloadHeaders(r)).then(function(e){if(o._dataValidator(e),r&&r.enableCache){var i=a?{item:a,index:s}:void 0;o._addOrUpdateCacheEntry(t,e,!0,i)}return e}),h=void 0;if(r&&r.enableDataPrefetch){var _=new i._QosMonitor("NavigationDataStore.fetchAppData");h=this._executor(t,e._generatePrefetchHeaders(r)).then(function(e){var r=a?{item:a,index:s}:void 0;return o._addOrUpdateCacheEntry(t,e,!1,r),_.writeSuccess(),e}).catch(function(e){throw _.writeUnexpectedFailure(e),e})}return Promise.resolve({preloadedData:n,prefetchedData:h})},e.prototype._heapify=function(t){var r=e._leftChild(t),i=e._rightChild(t),a=void 0;a=r<this._store.size&&this._store.items[r].accessedTime<this._store.items[t].accessedTime?r:t,i<this._store.size&&this._store.items[i].accessedTime<this._store.items[a].accessedTime&&(a=i),a!==t&&(e._swap(this._store.items,t,a),this._heapify(a))},e.prototype._extractMin=function(){if(!(this._store.size<1)){var t=this._store.items[0];this._store.items[0]=this._store.items[this._store.size-1],this._store.size-=1,this._heapify(0);var r=this._store.items.splice(this._store.size);return e._removeItemEntries(r),t}},e.prototype._reduceKey=function(t,r){for(this._store.items[t]=r;t>=0&&this._store.items[e._parent(t)]<this._store.items[t];)e._swap(this._store.items,t,e._parent(t)),t=e._parent(t)},e.prototype._insert=function(e){this._store.size===this._maxStoreSize&&this._extractMin(),this._store.size+=1,this._reduceKey(this._store.size-1,e)},e.prototype._buildMinHeap=function(e){this._store={items:e,size:e.length};for(var t=Math.floor(this._store.size/2);t>=0;t--)this._heapify(t)},e.prototype._findItem=function(t){var r=void 0,i=-1;for(i=0;i<this._store.size;i++){var a=this._store.items[i];if(a&&e._normalizeUrl(a.url)===e._normalizeUrl(t)){r=a;break}}return{item:r,index:void 0===r?-1:i}},e.refreshThresholdMs=6e5,e.maxStoreSize=15,e}();t.default=s}}]);