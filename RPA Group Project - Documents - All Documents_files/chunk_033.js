(window.webpackJsonp_1e2cdec9_1360_4295_b73c_98d6f51866d5_0_1_0=window.webpackJsonp_1e2cdec9_1360_4295_b73c_98d6f51866d5_0_1_0||[]).push([[18],{Q694:function(e,t){var i={SiteScriptProgressIndicatorIncompleteText5:"Applying site design. We\u0027re updating your site based on the design you chose. {0}",SiteScriptProgressIndicatorViewProgressLink5:"View progress",SiteScriptProgressIndicatorCompleteText:"{0} applied. {1}.",SiteScriptProgressIndicatorViewLink:"Site design",SiteScriptProgressIndicatorCompleteLink:"Refresh this site to see the changes"};i.default=i,e.exports=i},k6ue:function(e,t,i){"use strict";i.r(t),i.d(t,"SiteScriptProgressIndicator",function(){return P});var r=i("17wl"),n=i("cDcd"),s=i("KL1q"),a=i("K9kD"),o=i("qQzT"),p=i("Q694"),c=i.n(p),l=i("iODI"),g=i("7LxS"),_=i("zW8p"),S=Object(l.a)(function(){return Object(r.__awaiter)(void 0,void 0,void 0,function(){return Object(r.__generator)(this,function(e){switch(e.label){case 0:return[4,Promise.all([i.e(0),i.e(2),i.e(4),i.e(42),i.e(44)]).then(i.bind(null,"HVp0"))];case 1:return[2,e.sent().SiteScriptProgressPanel]}})})}),P=function(e){function t(t){var i=e.call(this,t)||this;return i._onNewDataReceived=function(e){e.isSiteDesignPending&&(i._firstRunPanelExperience||(a.Engagement.logData({name:"SiteScripts.BarAppeared"}),i._firstRunPanelExperience=!0));var t=!1;e.canRenderWebTemplatesGalleryFirstRun&&Object(g.c)(i.props.pageContext)&&(t=!0),i.setState({isComplete:i._siteScriptProgressStateManager.isRunComplete(e.displayedRunKey),isVisible:e.isSiteDesignPending,renderWebTemplatesGalleryFirstRun:t})},i._onOpenPanelAction=function(e){a.Engagement.logData({name:"SiteScripts.OpenPanelFromGear.Click"}),i.state.isPanelOpen||i.setState({isPanelOpen:!0})},i._onClickOpenPanel=function(e){a.Engagement.logData({name:"SiteScripts.OpenPanelFromBar.Click"}),i.setState({isPanelOpen:!0}),e.stopPropagation(),e.preventDefault()},i._onClickRefreshPage=function(e){a.Engagement.logData({name:"SiteScripts.RefreshFromBar.Click"}),window.location.href=i.props.pageContext?i.props.pageContext.webServerRelativeUrl:window.location.href},i._onPanelDismissed=function(){i.setState({isPanelOpen:!1})},i.state={isPanelOpen:!1,isComplete:!1,isVisible:!1,renderWebTemplatesGalleryFirstRun:!1},i._siteScriptProgressStateManager=o.SiteScriptProgressStateManager.getInstance({pageContext:t.pageContext}),i._panelWasEverOpen=!1,i._firstRunPanelExperience=!1,i}return Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){this._siteScriptProgressManagerKey="SiteScriptProgressIndicator"+Math.random().toString(),this._siteScriptProgressStateManager.registerCallback(this._siteScriptProgressManagerKey,o.SiteScriptProgressCallbackType.newProgressData,this._onNewDataReceived),this._siteScriptProgressStateManager.registerCallback(this._siteScriptProgressManagerKey,o.SiteScriptProgressCallbackType.openPanelAction,this._onOpenPanelAction)},t.prototype.componentWillUnmount=function(){this._siteScriptProgressStateManager.unregisterCallback(this._siteScriptProgressManagerKey,o.SiteScriptProgressCallbackType.newProgressData),this._siteScriptProgressStateManager.unregisterCallback(this._siteScriptProgressManagerKey,o.SiteScriptProgressCallbackType.openPanelAction)},t.prototype.render=function(){var e,t;if(this._panelWasEverOpen=this._panelWasEverOpen||this.state.isPanelOpen,this.state.isVisible||this._siteScriptProgressStateManager.getState().isSiteDesignPending)if(this.state.isComplete){3!==(p=c.a.SiteScriptProgressIndicatorCompleteText.split(/{[01]}/)).length&&(p=[c.a.SiteScriptProgressIndicatorCompleteText,"",""]);var i,a=n.createElement(s.Link,{onClick:this._onClickOpenPanel,"data-automationid":"SiteScriptProgressOpenPanelLink"},c.a.SiteScriptProgressIndicatorViewLink),o=n.createElement(s.Link,{onClick:this._onClickRefreshPage},c.a.SiteScriptProgressIndicatorCompleteLink);i=c.a.SiteScriptProgressIndicatorCompleteText.indexOf("{0}")<=c.a.SiteScriptProgressIndicatorCompleteText.indexOf("{1}")?[a,o]:[o,a],t=n.createElement(s.MessageBar,{messageBarType:s.MessageBarType.warning},p[0],i[0],p[1],i[1],p[2])}else{var p;2!==(p=c.a.SiteScriptProgressIndicatorIncompleteText5.split("{0}")).length&&(p=[c.a.SiteScriptProgressIndicatorIncompleteText5,""]),t=n.createElement(s.MessageBar,{messageBarType:s.MessageBarType.warning},p[0],n.createElement(s.Link,{onClick:this._onClickOpenPanel,"data-automationid":"SiteScriptProgressOpenPanelLink"},c.a.SiteScriptProgressIndicatorViewProgressLink5),p[1])}else{if(this.state.renderWebTemplatesGalleryFirstRun)return n.createElement(_.a,Object(r.__assign)({},{pageContext:this.props.pageContext,imageUrls:{webTemplatesFirstRunIllustration:null===(e=this.props.imageUrls)||void 0===e?void 0:e.webTemplatesFirstRunIllustration}}));if(!this._panelWasEverOpen)return null;t=void 0}return n.createElement("div",null,t,n.createElement(S,{onDismissed:this._onPanelDismissed,siteScriptProgressStateManager:this._siteScriptProgressStateManager,isOpen:this.state.isPanelOpen,firstRunPanelExperience:this._firstRunPanelExperience,responsiveMode:this.props.responsiveMode,imageUrls:this.props.imageUrls,pageContext:this.props.pageContext}))},t}(n.Component)}}]);