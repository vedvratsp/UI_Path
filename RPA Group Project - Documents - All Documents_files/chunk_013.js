(window.webpackJsonpb6917cb1_93a0_4b97_a84d_7cf49975d4ec_0_2_0=window.webpackJsonpb6917cb1_93a0_4b97_a84d_7cf49975d4ec_0_2_0||[]).push([[36],{Ddmm:function(e,t,r){"use strict";r("qkfK");var n,i=r("K9kD");!function(e){e[e.InteractionRequired=10013]="InteractionRequired"}(n||(n={}));var o=function(){function e(e,t){void 0===e&&(e={}),this._dataSource=t.oAuthTokenDataSource}return e.prototype.getToken=function(e,t){var r=new i.Qos({name:"getToken"});return this._dataSource.getToken(e,t).then(function(e){return r.end({resultType:i.ResultTypeEnum.Success}),e},function(e){return r.end({resultType:i.ResultTypeEnum.Failure}),i.Promise.reject(e)})},e.prototype.getInstrumentedToken=function(e,t){var r=new i.Qos({name:"getToken"});return this._dataSource.getInstrumentedToken(e,t).then(function(e){return r.end({resultType:i.ResultTypeEnum.Success}),e},function(e){return r.end({resultType:i.ResultTypeEnum.Failure}),i.Promise.reject(e)})},e}();t.a=o},Gu0Z:function(e,t,r){"use strict";var n,i=r("17wl"),o=function(){function e(){}return e.tokenCacheSessionStorageId="tokenCache",e.aboutToExpireIntervalSeconds=600,e.apiUrl="/_api/SP.OAuth.Token/Acquire",e.retries=3,e.retriableErrorCodes=[10006,10008],e.unexpectedErrorCodeFormat="Expected error code format is <numericCode>, <exception class name>",e.unexpectedTokenMessageFormat="Your token request succeedeed but the token could not be parsed from the response.This is most probably caused by a change in the server response format",e.npmPackageVersion="0.1.5",e}();!function(e){e[e.unknownError=0]="unknownError",e[e.malformedResponseBody=1]="malformedResponseBody",e[e.serverError=2]="serverError"}(n||(n={}));var a=function(e){function t(r,n){var i=e.call(this,n.message)||this;return i.__proto__=t.prototype,i._type=r,i._httpResponseStatus=n.httpResponseStatus,i._cultureName=n.cultureName,i._message=n.message,i._serverErrorCode=n.serverErrorCode,i._correlationId=n.correlationId,i._redirectUrl=n.redirectUrl,i}return Object(i.__extends)(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverErrorCode",{get:function(){if(this.type!==n.serverError)throw new Error("ServerErrorCode can only be obtained for errors of type serverError");return this._serverErrorCode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"httpResponseStatus",{get:function(){return this._httpResponseStatus},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this._message},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cultureName",{get:function(){return this._cultureName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"correlationId",{get:function(){return this._correlationId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"redirectUrl",{get:function(){return this._redirectUrl},enumerable:!0,configurable:!0}),t}(Error),s=function(){function e(e){var t=this;this._context=e,this._dispose=this._dispose.bind(this),window.addEventListener("unload",this._dispose),window._spPageOnMediaTokenReceived=function(){t._receiveMediaServiceFlushedToken()},window._spMSBTLoaded=function(){t._receiveMediaServiceFlushedToken()}}return e._getCorrelationId=function(e){return e.headers.get("sprequestguid")},e._extractRealError=function(e){return e.hasOwnProperty("error")?e.error:e},e.prototype.getOAuthToken=function(e,t){return this.getInstrumentedOAuthToken(e,t).then(function(e){if(e)return e.tokenInfo})},e.prototype.getInstrumentedOAuthToken=function(e,t){var r=this;this._receiveMediaServiceFlushedToken();var n=this._getCachedTokenData(e);if(n&&!this._isExpiring(n)){var i={token:n.accessToken,isGuest:!1,expirationTimeMs:n.expiresOn};return Promise.resolve({tokenInfo:i,spRequestId:n.correlationId,spRequestTimestamp:n.requestTimestamp})}return this._retriableFetchWithDigest(e,o.retries,t).then(function(t){return r._storeTokenData(e,t),{tokenInfo:{token:t.accessToken,isGuest:!1,expirationTimeMs:t.expiresOn},spRequestId:t.correlationId,spRequestTimestamp:t.requestTimestamp}})},e.prototype.clearCachedToken=function(e){var t=this._getCacheKey(e);window.sessionStorage.removeItem(t);var r=this._resourceKeys.indexOf(t);!isNaN(r)&&r>-1&&this._resourceKeys.splice(r)},Object.defineProperty(e.prototype,"_resourceKeys",{get:function(){return this._keysToDispose||(this._keysToDispose=new Array),this._keysToDispose},enumerable:!0,configurable:!0}),e.prototype._retriableFetchWithDigest=function(t,r,i){var o=this,s=this._context.qosMonitor(),l=Date.now();return this._context.fetchWithDigest(this._buildTokenRequest(t,i)).then(function(u){if(200!==u.status){o._context.logger.logError("fetchWithDigest failed. Server responded with "+u.statusText);var c=new a(n.unknownError,{httpResponseStatus:u.status,message:u.statusText,correlationId:e._getCorrelationId(u)});return 400!==u.status?(s.writeUnexpectedFailure("UnknownError",c),Promise.reject(c)):u.json().then(function(n){var a=e._extractRealError(n),l=o._getErrorCodeFromResponseCode(a);if(!o._isRetriableError(l)||0===r){var u=o._buildErrorFromResponse(a);return s.writeUnexpectedFailure("SharepointServerError",u),Promise.reject(u)}return o._context.logger.logError("fetchWithDigest failed. Retrying. Retries left: "+r),o._retriableFetchWithDigest(t,r-1,i)})}return o._instrumentedParseResponseData(u,s,l)})},e.prototype._getCachedTokenData=function(e){return JSON.parse(window.sessionStorage.getItem(this._getCacheKey(e)))},e.prototype._storeTokenData=function(e,t){window.sessionStorage.setItem(this._getCacheKey(e),JSON.stringify(t))},e.prototype._getCacheKey=function(e){var t=["sp-client-shared",o.npmPackageVersion,"OAuthUtility",e].join(";");return-1===this._resourceKeys.indexOf(t)&&this._resourceKeys.push(t),t},e.prototype._isExpiring=function(e){return e.expiresOn-Date.now()/1e3<o.aboutToExpireIntervalSeconds},e.prototype._isRetriableError=function(e){return-1!==o.retriableErrorCodes.indexOf(e)},e.prototype._buildTokenRequest=function(e,t){var r=new Headers;r.append("Content-Type","application/json; charset=utf-8"),r.append("Odata-Version","4.0"),r.append("Accept","application/json;odata.metadata=minimal");var n={method:"POST",headers:r,body:JSON.stringify(this._buildRequestBody(e))},i=t;return i&&i.lastIndexOf("/")===i.length-1&&(i=i.substr(0,i.length-1)),new Request(i+o.apiUrl,n)},e.prototype._buildRequestBody=function(e){return{resource:e}},e.prototype._buildErrorFromResponse=function(e){var t,r,i=this._getErrorCodeFromResponseCode(e);return void 0===i?new a(n.malformedResponseBody,{httpResponseStatus:400,message:o.unexpectedErrorCodeFormat,correlationId:e.correlationId}):(e.message&&("string"==typeof e.message?t=e.message:(t=e.message.value,r=e.message.lang)),new a(n.serverError,{httpResponseStatus:400,message:t,cultureName:r,serverErrorCode:i,correlationId:e.correlationId,redirectUrl:e["error.redirectUrl"]||e["@error.redirectUrl"]}))},e.prototype._getErrorCodeFromResponseCode=function(e){var t=e.code,r=Number(t);if(isNaN(r)&&"string"==typeof e.message){var n=t.indexOf(",");-1!==n&&(r=Number(t.substr(0,n)))}return r},e.prototype._instrumentedParseResponseData=function(t,r,i){try{return t.json().then(function(n){return r.writeSuccess(),{accessToken:n.access_token,expiresOn:Number(n.expires_on),notBefore:Number(n.not_before),resource:n.resource,tokenType:n.token_type,correlationId:e._getCorrelationId(t),requestTimestamp:i}})}catch(i){return r.writeUnexpectedFailure("ResponseParseError",i),Promise.reject(new a(n.malformedResponseBody,{httpResponseStatus:200,message:o.unexpectedTokenMessageFormat,correlationId:e._getCorrelationId(t)}))}},e.prototype._dispose=function(e){window.removeEventListener("unload",this._dispose);for(var t=0,r=this._resourceKeys;t<r.length;t++){var n=r[t];window.sessionStorage.removeItem(n)}},e.prototype._receiveMediaServiceFlushedToken=function(){if(window._spMSBT){var e={tokenType:window._spMSBT.TokenType,expiresOn:window._spMSBT.ExpiresOn,notBefore:void 0,resource:window._spMSBT.Resource,accessToken:window._spMSBT.AccessToken};this._storeTokenData(e.resource,e),window._spMSBT=void 0}},e}(),l=r("dq6a"),u=r("K9kD"),c=r("3HEj"),d=function(){function e(){this._qos=new u.Qos({name:"OAuthTokenDataSource"})}return e.prototype.writeSuccess=function(){this._qos.end({resultType:u.ResultTypeEnum.Success})},e.prototype.writeUnexpectedFailure=function(e,t){this._qos.end({resultCode:e,resultType:u.ResultTypeEnum.Failure,error:JSON.stringify(t)})},e.prototype.writeExpectedFailure=function(e,t){this._qos.end({resultCode:e,resultType:u.ResultTypeEnum.ExpectedFailure,error:JSON.stringify(t)})},e}(),p=function(){function e(){}return e.prototype.logWarning=function(e){},e.prototype.logError=function(e){},e}(),f=function(e){function t(t,r){var n=e.call(this,{},{pageContext:t})||this;return n.logger=new p,r&&(r.logger&&(n.logger=r.logger),r.useAbsoluteUrlForOAuth&&(n._useAbsoluteUrlForOAuth=r.useAbsoluteUrlForOAuth)),n._oAuthUtility=new s(n),n}return Object(i.__extends)(t,e),t.prototype.qosMonitor=function(){return new d},Object.defineProperty(t.prototype,"webUrl",{get:function(){return this._useAbsoluteUrlForOAuth?this._pageContext.webAbsoluteUrl:Object(c.c)(this._pageContext)},enumerable:!0,configurable:!0}),t.prototype.fetchWithDigest=function(e){var t=this;return e.text().then(function(r){var n=e.headers.get("Content-Type");return e.headers.delete("Content-Type"),t._odspPromiseToEs6Promise(t.getData(function(){return e.url},function(e,t){return new Response(e,{status:t.getStatus(),headers:t.getResponseHeadersDictionary()})},"DelegationTokenDataSource",function(){return r},"POST",t._getRequestHeadersDictionary(e),n,void 0,!0).then(function(e){return e},function(e){return new Response(JSON.stringify(e),{status:e.status})}))})},t.prototype.getToken=function(e,t){return t&&this._oAuthUtility.clearCachedToken(e),this._es6PromiseToOdspPromise(this._oAuthUtility.getOAuthToken(e,this.webUrl).then(function(e){return e.token}))},t.prototype.getInstrumentedToken=function(e,t){return t&&this._oAuthUtility.clearCachedToken(e),this._es6PromiseToOdspPromise(this._oAuthUtility.getInstrumentedOAuthToken(e,this.webUrl))},t.prototype._getRequestHeadersDictionary=function(e){var t=e.headers,r={};return t.forEach(function(e,t){r[t]=e}),r},t.prototype._odspPromiseToEs6Promise=function(e){return new Promise(function(t,r){e.then(function(e){t(e)},function(e){r(e)})})},t.prototype._es6PromiseToOdspPromise=function(e){return new u.Promise(function(t,r){e.then(function(e){t(e)},function(e){r(e)})})},t}(l.b);t.a=f},SYdo:function(e,t,r){"use strict";r.r(t),r.d(t,"pageMode",function(){return w}),r.d(t,"DwellTime",function(){return P}),r.d(t,"DwellTimeSignalType",function(){return n}),r.d(t,"DwellTimeTelemetry",function(){return E});var n,i,o=r("17wl"),a=r("K9kD"),s=r("dq6a"),l=r("Ddmm"),u=r("Gu0Z"),c=r("3HEj"),d={method:"POST",noRedirect:!0},p=a.Features.isFeatureEnabled({ODB:379}),f=function(e){function t(t,r){var n=e.call(this,{dataSourceName:"PageActivities"},{pageContext:t})||this;return p&&r?n._getToken=r:(n._tokenProvider=new l.a(null,{oAuthTokenDataSource:new u.a(t)}),n._getToken=function(e,t){return n._tokenProvider.getToken(e,t)}),n}return Object(o.__extends)(t,e),t.prototype.postPageActivities=function(e){var t=this,r=this._getBaseUrl(),n=new a.Qos({name:"dwellFetchToken"});return this._getToken(Object(c.d)(this._pageContext)).then(function(i){n.end({resultType:a.ResultTypeEnum.Success});var s=new a.Qos({name:"sendPageActivitiesSync"}),l=r+"/pages/oneDrive.sendActivities",u={value:e},c=t.dataRequestor.getData(Object(o.__assign)({url:l,authToken:i,qosName:"sendPageActivities",additionalPostData:JSON.stringify(u),additionalHeaders:{accept:"application/json"}},d));return s.end({resultType:a.ResultTypeEnum.Success}),c},function(e){return n.end({resultCode:e,resultType:a.ResultTypeEnum.Failure}),e})},t.prototype._getBaseUrl=function(e){var t=this._getAPIBaseUrl(e);return t+"/sites/"+new a.Uri(t).getAuthority()+","+a.Guid.normalizeLower(this._pageContext.siteId,!1)+","+a.Guid.normalizeLower(this._pageContext.webId,!1)},t.prototype._getAPIBaseUrl=function(e){return Object(c.d)(this._pageContext)+"/_api/v"+(e||"2.1")},t}(s.b),g=a.Features.isFeatureEnabled({ODB:1794}),h=a.Features.isFeatureEnabled({ODB:1795}),_=a.Features.isFeatureEnabled({ODB:1797}),m=a.Features.isFeatureEnabled({ODB:1694}),v=a.Features.isFeatureEnabled({ODB:1361}),T=a.Features.isFeatureEnabled({ODB:1727}),I=a.Features.isFeatureEnabled({ODB:1782}),y=a.Features.isFeatureEnabled({ODB:1899});!function(e){e.PageActivities="PageActivities"}(n||(n={})),function(e){e.HomePage="HomePage",e.ArticlePage="ArticlePage",e.ModernPage="ModernPage",e.ClassicPage="ClassicPage",e.NewsPage="NewsPage",e.NewsDigestPage="NewsDigestPage",e.Space="Space"}(i||(i={}));var w,E=function(){function e(){}return e.initialize=function(t,r,n,i){var o,s;if(e.disableDwellInitMonitorsKSActivated()&&(s=new a.Qos({name:"DwellTimeTelemetryInitialization"})),e.sessionId=t,e.initializationTimestamp=e.initializationTimestamp||Date.now(),e.initializeLocalStorage=!0,e.ariaKeyPrefix=r,n){e.pageContext=n,e.PageActivitiesDatSource=new f(n,i);try{var l=n.systemUserKey;if(l){var u=l.lastIndexOf("|")+1,c=-1===l.indexOf("@")?l.length:l.indexOf("@");e.userId=l.substring(u,c)}}catch(t){e._handleException(t&&t.message)}}this.sendEvents(),this._initializeForDiffIntervals("DWELL_TIME","LAST_DWELL_TIME_SENT"),g&&(this._initializeForDiffIntervals("DWELL_TIME_10_SEC","LAST_DWELL_TIME_SENT_10_SEC"),this._initializeForDiffIntervals("DWELL_TIME_1_MIN","LAST_DWELL_TIME_SENT_1_MIN"),this._initializeForDiffIntervals("DWELL_TIME_2_MIN","LAST_DWELL_TIME_SENT_2_MIN"),this._initializeForDiffIntervals("DWELL_TIME_3_MIN","LAST_DWELL_TIME_SENT_3_MIN")),h&&this._initializeForDiffIntervals("DWELL_TIME_30_SEC","LAST_DWELL_TIME_SENT_30_SEC"),e.initializeLocalStorage=!1,y&&e._isIncognitoBrowser().then(function(t){e.isIncognitoBrowser=t}),e.disableDwellInitMonitorsKSActivated()&&(null===(o=s)||void 0===o||o.end({resultType:a.ResultTypeEnum.Success}))},e.bufferDwellTimeIntervals=function(){this._bufferDwellTimeIntervalsForDiffIntervals("DWELL_TIME","LAST_DWELL_TIME_SENT",3e5),g&&(this._bufferDwellTimeIntervalsForDiffIntervals("DWELL_TIME_10_SEC","LAST_DWELL_TIME_SENT_10_SEC",1e4),this._bufferDwellTimeIntervalsForDiffIntervals("DWELL_TIME_1_MIN","LAST_DWELL_TIME_SENT_1_MIN",6e4),this._bufferDwellTimeIntervalsForDiffIntervals("DWELL_TIME_2_MIN","LAST_DWELL_TIME_SENT_2_MIN",12e4),this._bufferDwellTimeIntervalsForDiffIntervals("DWELL_TIME_3_MIN","LAST_DWELL_TIME_SENT_3_MIN",18e4)),h&&this._bufferDwellTimeIntervalsForDiffIntervals("DWELL_TIME_30_SEC","LAST_DWELL_TIME_SENT_30_SEC",3e4)},e.sendEvents=function(){this._sendEventsForDiffIntervals("DWELL_TIME","LAST_DWELL_TIME_SENT",3e5),g&&(this._sendEventsForDiffIntervals("DWELL_TIME_10_SEC","LAST_DWELL_TIME_SENT_10_SEC",1e4),this._sendEventsForDiffIntervals("DWELL_TIME_1_MIN","LAST_DWELL_TIME_SENT_1_MIN",6e4),this._sendEventsForDiffIntervals("DWELL_TIME_2_MIN","LAST_DWELL_TIME_SENT_2_MIN",12e4),this._sendEventsForDiffIntervals("DWELL_TIME_3_MIN","LAST_DWELL_TIME_SENT_3_MIN",18e4)),h&&this._sendEventsForDiffIntervals("DWELL_TIME_30_SEC","LAST_DWELL_TIME_SENT_30_SEC",3e4)},e.logInitialPageLoadEvent=function(t){t&&a.Engagement.withContext(e._getAriaEventContext(e.sessionId,t.extraPageData)).logData({name:"DwellTime_InitialPageLoad",currentPage:t.pageId,extraData:{pageType:t.pageType,dwellLibVersion:2,uniqueKeyIdentifier:e._getUniqueKeyIdentifier(e.sessionId,e.initializationTimestamp,t.pageId),incognitoBrowser:e.isIncognitoBrowser,sessionInitTime:e.initializationTimestamp,startTime:performance.now()}})},e.disableDwellInitMonitorsKSActivated=function(){return a.Killswitch.isActivated("7f3f5cda-0a1a-46dd-922e-56b5db4a7031","10/08/2020","Stage always success QoS monitors for removal.")},e._getPageActivity=function(e,t,r,n){var i=t.page.extraPageData,o=r&&r[r.length-1].stop||0;return{sharepointIds:{siteId:i&&i.siteId&&i.siteId.toString()||"",webId:i&&i.webId&&i.webId.toString()||"",listId:i&&i.listId&&i.listId.toString()||"",listItemUniqueId:t.page.pageId},webTemplateId:i&&i.webTemplateId&&i.webTemplateId.toString()||"",operation:"PageActivities",pageType:t.page.pageType||"",totalDwellTimeMs:P.calculateTotalDwellTimeFromIntervals(r),totalTimeMs:P.calculateTotalTimeFromIntervals(r),dwellFrequency:r&&r.length||0,pageReadPercentage:t.page.percentageRead,clientSessionId:e,pageMode:n,lastActivityDateTime:new Date(o).toISOString()}},e._sendAriaEvent=function(t,r,i,o,s,l){var u=r.page.extraPageData,c=i&&i[i.length-1].stop||0;a.Engagement.withContext(e._getAriaEventContext(t,r.page&&u)).logData({name:e.ariaKeyPrefix+n.PageActivities+s,currentPage:r.page.pageId,extraData:{intervals:JSON.stringify(i),totalDwellTime:P.calculateTotalDwellTimeFromIntervals(i),pageType:r.page.pageType,pageReadPercentage:r.page.percentageRead,totalTime:P.calculateTotalTimeFromIntervals(i),dwellFrequency:i&&i.length||0,pageMode:o,lastActivityDateTime:c?new Date(c).toISOString():"",dwellLibVersion:2,uniqueKeyIdentifier:e._getUniqueKeyIdentifier(t,l,r.page.pageId),incognitoBrowser:e.isIncognitoBrowser,sessionInitTime:l}})},e._getAriaEventContext=function(e,t){var r={"AppInfo.Session":e};return t&&(t.siteId&&(r.SiteId=t.siteId.toString()),t.webId&&(r.WebId=t.webId.toString()),t.webTemplateId&&(r.WebTemplateId=t.webTemplateId.toString()),t.listId&&(r.ListId=t.listId.toString())),r},e._validateStorgeSizeAndCleanup=function(t,r,n){var i=localStorage.getItem(t);i&&2*i.length>=51200&&e._sendEventsForDiffIntervals(t,r,n,!0)},e._initializeForDiffIntervals=function(t,r){var n,i;if(e.disableDwellInitMonitorsKSActivated()&&(i=new a.Qos({name:"DwellLocalStorageSet"+t})),!e.initializeLocalStorage&&!localStorage.getItem(t)){var o=P.getDwellTimeSettings()&&P.getDwellTimeSettings().page&&P.getDwellTimeSettings().page.pageId;a.Engagement.logData({name:"Dwell_Time_LocalStorage_Cleared",currentPage:o,extraData:{key:t,dwellLibVersion:2,uniqueKeyIdentifier:e._getUniqueKeyIdentifier(e.sessionId,e.initializationTimestamp,o),incognitoBrowser:e.isIncognitoBrowser,sessionInitTime:e.initializationTimestamp}})}var s=localStorage.getItem(t)||"{}",l=JSON.parse(s);l[e.sessionId]||(l[e.sessionId]={},l[e.sessionId].initializationTimestamp=e.initializationTimestamp,e._localStorageSetItem(t,JSON.stringify(l))),localStorage.getItem(r)||e._localStorageSetItem(r,Date.now().toString()),e.disableDwellInitMonitorsKSActivated()&&(null===(n=i)||void 0===n||n.end({resultType:a.ResultTypeEnum.Success}))},e._bufferDwellTimeIntervalsForDiffIntervals=function(t,r,n,i){e._validateStorgeSizeAndCleanup(t,r,n),e._initializeForDiffIntervals(t,r);var o=localStorage.getItem(t);if(o){var a=JSON.parse(o);a[e.sessionId][P.getPageId()]||(a[e.sessionId][P.getPageId()]={readIntervals:[],editIntervals:[],page:P.getDwellTimeSettings().page});var s=a[e.sessionId][P.getPageId()].percentageRead;s&&P.getPageReadPercentage()>s&&(a[e.sessionId][P.getPageId()].percentageRead=P.getPageReadPercentage()),P.isEditMode()?Array.prototype.push.apply(a[e.sessionId][P.getPageId()].editIntervals,P.getDwellTimeEditIntervals()):Array.prototype.push.apply(a[e.sessionId][P.getPageId()].readIntervals,P.getDwellTimeReadIntervals()),e._localStorageSetItem(t,JSON.stringify(a))||i||(e._sendEventsForDiffIntervals(t,r,n,!0),e._bufferDwellTimeIntervalsForDiffIntervals(t,r,n,!0))}},e._sendEventsForDiffIntervals=function(t,r,n,i){var o,s;e.disableDwellInitMonitorsKSActivated()&&(s=new a.Qos({name:"DwellSendEvents"+t}));var l=localStorage.getItem(r);if(Date.now()-(l?parseInt(l,10):0)>n||i){var u=localStorage.getItem(t);if(u){this._sendStorageSizeEvent(n,u);var c=JSON.parse(u),d=[],p=e.pageContext&&3e5===n;for(var f in c)if(c.hasOwnProperty(f)){var g=c[f];if(g){var h=g.initializationTimestamp;for(var _ in g)if(g.hasOwnProperty(_)&&"initializationTimestamp"!==_){var m=g[_],v=m.page.pageType;if(this._isAriaEnabled(v)){var T=3e5===n?"":"."+n/1e3+"s";m.editIntervals&&m.editIntervals.length>0&&e._sendAriaEvent(f,m,m.editIntervals,w.EDIT,T,h),m.readIntervals&&m.readIntervals.length>0&&e._sendAriaEvent(f,m,m.readIntervals,w.READ,T,h)}p&&this._isSPOEnabled(v)&&(m.editIntervals&&m.editIntervals.length>0&&d.push(e._getPageActivity(f,m,m.editIntervals,w.EDIT)),m.readIntervals&&m.readIntervals.length>0&&d.push(e._getPageActivity(f,m,m.readIntervals,w.READ)))}}}d.length>0&&e.PageActivitiesDatSource.postPageActivities(d)}e._localStorageSetItem(t,"{}"),e._localStorageSetItem(r,Date.now().toString())}e.disableDwellInitMonitorsKSActivated()&&(null===(o=s)||void 0===o||o.end({resultType:a.ResultTypeEnum.Success}))},e._sendStorageSizeEvent=function(t,r){if(_&&3e5===t){var n=2*r.length,i=P.getDwellTimeSettings()&&P.getDwellTimeSettings().page&&P.getDwellTimeSettings().page.pageId;a.Engagement.logData({name:"Dwell_Storage_Size",currentPage:i,extraData:{storageSize:n,dwellLibVersion:2,uniqueKeyIdentifier:e._getUniqueKeyIdentifier(e.sessionId,e.initializationTimestamp,i),incognitoBrowser:e.isIncognitoBrowser,sessionInitTime:e.initializationTimestamp}})}},e._isAriaEnabled=function(e){switch(e){case i.NewsPage:case i.HomePage:return m;case i.ArticlePage:return T;default:return!1}},e._isSPOEnabled=function(e){switch(e){case i.NewsPage:case i.HomePage:return v;case i.ArticlePage:return I;default:return!1}},e._localStorageSetItem=function(t,r){try{return localStorage.setItem(t,r),!0}catch(u){var n=2*r.length/1024,i=e._getLocalStorageSize(),o=P.getDwellTimeSettings()&&P.getDwellTimeSettings().page,s=o&&o.extraPageData,l=o&&o.pageId;return a.Engagement.withContext(e._getAriaEventContext(e.sessionId,s)).logData({name:"Dwell_Time_SetItem_Failed",currentPage:l,extraData:{key:t,dwellKeySize:n,localStorageSize:i,message:u&&u.message,dwellLibVersion:2,uniqueKeyIdentifier:e._getUniqueKeyIdentifier(e.sessionId,e.initializationTimestamp,l),incognitoBrowser:e.isIncognitoBrowser,sessionInitTime:e.initializationTimestamp}}),!1}},e._getLocalStorageSize=function(){var e="";for(var t in window.localStorage)window.localStorage.hasOwnProperty(t)&&(e+=t+window.localStorage[t]);return e?2*e.length/1024:0},e._getUniqueKeyIdentifier=function(t,r,n){var i=t;return e.userId&&(i=i+"_"+e.userId),r&&(i=i+"_"+r),n&&(i=i+"_"+n),i},e._isIncognitoBrowser=function(){return Object(o.__awaiter)(this,void 0,void 0,function(){var e;return Object(o.__generator)(this,function(t){switch(t.label){case 0:return"storage"in navigator&&"estimate"in navigator.storage?[4,navigator.storage.estimate()]:[3,2];case 1:return void 0!==(e=t.sent().quota)&&e<12e7?[2,!0]:[2,!1];case 2:return[2,!1];case 3:return[2]}})})},e._handleException=function(t){var r=P.getDwellTimeSettings()&&P.getDwellTimeSettings().page,n=r&&r.extraPageData,i=r&&r.pageId;a.Engagement.withContext(e._getAriaEventContext(e.sessionId,n)).logData({name:"Dwell_Time_Exception",currentPage:i,extraData:{message:t,dwellLibVersion:2,uniqueKeyIdentifier:e._getUniqueKeyIdentifier(e.sessionId,e.initializationTimestamp,i),incognitoBrowser:e.isIncognitoBrowser,sessionInitTime:e.initializationTimestamp}})},e}(),S=a.Features.isFeatureEnabled({ODB:674});!function(e){e.READ="READ",e.EDIT="EDIT"}(w||(w={}));var b=["scroll","resize"],D=["keyup","keydown","touchstart","click","contextmenu"],P=function(){function e(){}return e.initialize=function(t){var r,n;E.disableDwellInitMonitorsKSActivated()&&(n=new a.Qos({name:"DwellTimeLibraryInitialization"})),e.reset(),e.running=!1,e.pageReadPercentage=0,e.idle=!1,e.readIntervals=[],e.editIntervals=[],e.currentIdleTimeMs=0,e.dwellTimeSettings=t,e.mouseInactiveTime=t.mouseInactiveTime||3e4,e.checkCallbacksIntervalMs=100,e.totalEditDwellTime=0,e.totalReadDwellTime=0,e.historyPushState=history.pushState,e.historyReplaceState=history.replaceState,e.extraPageData=t.page.extraPageData,e._registerEventListeners(),e.startTimer(),E.logInitialPageLoadEvent(t.page),E.disableDwellInitMonitorsKSActivated()&&(null===(r=n)||void 0===r||r.end({resultType:a.ResultTypeEnum.Success}))},e.isRunning=function(){return this.running},e.startTimer=function(){e.checkCallbackIntervalId||e._checkCallbacksOnInterval();var t=e._getIntervals(),r=t[t.length-1];r&&null===r.stop||(t.push({start:Date.now(),stop:null}),e.running=!0)},e.stopTimer=function(){var t=e._getIntervals();t.length&&(t[t.length-1].stop=Date.now(),e.running=!1,(e.dwellTimeSettings.sendAriaEvents||e.dwellTimeSettings.sendSPOEvents)&&(E.bufferDwellTimeIntervals(),e._updateTotalEditDwellTime(),e._updateTotalReadDwellTime(),e.readIntervals=[],e.editIntervals=[],E.sendEvents()))},e.getTimeInMilliseconds=function(){return e.getEditDwellTimeInMilliseconds()+e.getReadDwellTimeInMilliseconds()},e.getEditDwellTimeInMilliseconds=function(){return e.totalEditDwellTime+e.calculateTotalDwellTimeFromIntervals(e.editIntervals)},e.getReadDwellTimeInMilliseconds=function(){return e.totalReadDwellTime+e.calculateTotalDwellTimeFromIntervals(e.readIntervals)},e.calculateTotalDwellTimeFromIntervals=function(e){return e.length>0?e.reduce(function(e,t){return t.stop?e+=t.stop-t.start:e+=Date.now()-t.start,e},0):0},e.calculateTotalTimeFromIntervals=function(e){if(e&&e.length>0){var t=e[e.length-1],r=e[0];if(t.stop)return t.stop-r.start}return 0},e.getTimeInSeconds=function(t){return t?Number((e.getTimeInMilliseconds()/1e3).toFixed(t)):e.getTimeInMilliseconds()/1e3},e.isEditMode=function(){return!e.isEditDwellTimeKSActivated()&&Boolean(e.extraPageData&&e.extraPageData.pageMode&&e.extraPageData.pageMode===w.EDIT)},e.getDwellTimeEditIntervals=function(){return e.editIntervals},e.reset=function(){e.isRunning()&&e.stopTimer(),e.readIntervals=[],e.editIntervals=[],e._destroy()},e.getDwellTimeReadIntervals=function(){return e.readIntervals},e.getPageId=function(){return e.dwellTimeSettings.page.pageId},e.getPageReadPercentage=function(){return e.pageReadPercentage},e.getDwellTimeSettings=function(){return e.dwellTimeSettings},e.registerScrollListener=function(t){if(t){e.scrollDivClass=t;var r=document.getElementsByClassName(t);r&&r[0]&&(r[0].addEventListener("scroll",e._findPageReadPercentage,{passive:!0}),r[0].addEventListener("scroll",e._onBrowserTabInactive,{passive:!0}))}},e.updatePageMode=function(t){e.stopTimer(),e.extraPageData||(e.extraPageData={}),e.extraPageData.pageMode=t,e.startTimer()},e.isEditDwellTimeKSActivated=function(){return a.Killswitch.isActivated("87c86ec7-dbf9-4e8e-9999-49d980ed96fd","09/11/2019","Edit mode dwell time")},e._getIntervals=function(){return e.isEditMode()?e.editIntervals:e.readIntervals},e._updateTotalEditDwellTime=function(){e.totalEditDwellTime=e.getEditDwellTimeInMilliseconds()},e._updateTotalReadDwellTime=function(){e.totalReadDwellTime=e.getReadDwellTimeInMilliseconds()},e._onBrowserTabInactive=function(t){e.running&&e.stopTimer()},e._onBrowserTabActive=function(t){e.running||e.startTimer()},e._resetIdleTime=function(t){e.idle&&e.startTimer(),e.idle=!1,e.currentIdleTimeMs=0},e._resetIdleTimeWithStartTimer=function(t){e._resetIdleTime(t),e.running||e.startTimer()},e._registerEventListeners=function(){var t={passive:!0};window.addEventListener("blur",e._onBrowserTabInactive,t),window.addEventListener("focus",e._onBrowserTabActive,t),window.addEventListener("unload",e._onBrowserTabInactive,t),b.forEach(function(r){window.addEventListener(r,e._resetIdleTime,t)}),document.body.addEventListener("mouseleave",e._onBrowserTabInactive,t),document.addEventListener("mousemove",e._resetIdleTimeWithStartTimer,t),D.forEach(function(r){document.addEventListener(r,e._resetIdleTime,t)}),e._addLocationChangeListener()},e._dwellPushState=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=e.historyPushState.apply(history,t);if(e.isRunning()){var i=document.createEvent("Event");i.initEvent("locationChange",!0,!0),window.dispatchEvent(i)}return n},e._dwellReplaceState=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=e.historyReplaceState.apply(history,t);if(e.isRunning()){var i=document.createEvent("Event");i.initEvent("locationChange",!0,!0),window.dispatchEvent(i)}return n},e._addLocationChangeListener=function(){var t={passive:!0};S&&(history.pushState=e._dwellPushState,history.replaceState=e._dwellReplaceState),window.addEventListener("popstate",e._onBrowserTabInactive,t),window.addEventListener("locationChange",e._onBrowserTabInactive,t)},e._checkCallbacksOnInterval=function(){e.checkCallbackIntervalId=window.setInterval(function(){e.currentIdleTimeMs>=e.mouseInactiveTime&&e.running?(e.idle=!0,e.stopTimer()):e.currentIdleTimeMs+=e.checkCallbacksIntervalMs},e.checkCallbacksIntervalMs)},e._destroy=function(){e._unregisterEventListeners(),e.checkCallbackIntervalId&&(window.clearInterval(e.checkCallbackIntervalId),e.checkCallbackIntervalId=0),S&&e.historyPushState&&e.historyReplaceState&&(history.pushState===e._dwellPushState&&(history.pushState=e.historyPushState),history.replaceState===e._dwellReplaceState&&(history.replaceState=e.historyReplaceState))},e._unregisterEventListeners=function(){if(window.removeEventListener("blur",e._onBrowserTabInactive),window.removeEventListener("popstate",e._onBrowserTabInactive),window.removeEventListener("locationChange",e._onBrowserTabInactive),window.removeEventListener("unload",e._onBrowserTabInactive),window.removeEventListener("focus",e._onBrowserTabActive),b.forEach(function(t){window.removeEventListener(t,e._resetIdleTime)}),document.body.removeEventListener("mouseleave",e._onBrowserTabInactive),document.removeEventListener("mousemove",e._resetIdleTimeWithStartTimer),D.forEach(function(t){document.removeEventListener(t,e._resetIdleTime)}),e.scrollDivClass){var t=document.getElementsByClassName(e.scrollDivClass);t&&t[0]&&(t[0].removeEventListener("scroll",e._findPageReadPercentage),t[0].removeEventListener("scroll",e._onBrowserTabInactive))}},e._findPageReadPercentage=function(t){var r=t.target,n=r.clientHeight,i=r.scrollHeight-n,o=r.scrollTop;if(0===o&&0===i)return 100;var a=Math.floor(o/i*100);return a>e.pageReadPercentage&&(e.pageReadPercentage=a),a},e}()},qkfK:function(e,t){!function(e){"use strict";if(!e.fetch){var t="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,n="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},l=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};g.prototype.append=function(e,t){e=d(e),t=p(t);var r=this.map[e];this.map[e]=r?r+","+t:t},g.prototype.delete=function(e){delete this.map[d(e)]},g.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},g.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},g.prototype.set=function(e,t){this.map[d(e)]=p(t)},g.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},g.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),f(e)},g.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),f(e)},g.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),f(e)},r&&(g.prototype[Symbol.iterator]=g.prototype.entries);var u=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];I.prototype.clone=function(){return new I(this,{body:this._bodyInit})},T.call(I.prototype),T.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var c=[301,302,303,307,308];w.redirect=function(e,t){if(-1===c.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})},e.Headers=g,e.Request=I,e.Response=w,e.fetch=function(e,t){return new Promise(function(r,i){var o=new I(e,t),a=new XMLHttpRequest;a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new g,e.split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}}),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;r(new w(i,n))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials&&(a.withCredentials=!0),"responseType"in a&&n&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}function d(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function p(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function g(e){this.map={},e instanceof g?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function _(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function m(e){var t=new FileReader,r=_(t);return t.readAsArrayBuffer(e),r}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(n&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(i&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(o&&n&&s(e))this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(e)&&!l(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=v(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e,t,r,n=h(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,r=_(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}function I(e,t){var r,n,i=(t=t||{}).body;if(e instanceof I){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new g(e.headers)),this.method=e.method,this.mode=e.mode,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new g(t.headers)),this.method=(n=(r=t.method||this.method||"GET").toUpperCase(),u.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function y(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}}),t}function w(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new g(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)}}]);